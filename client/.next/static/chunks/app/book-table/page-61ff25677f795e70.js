(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[991],{9405:(e,t,a)=>{Promise.resolve().then(a.bind(a,6086))},6046:(e,t,a)=>{"use strict";var s=a(6658);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},6086:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var s=a(5155),o=a(2115),n=a(6046);function r(){let[e,t]=(0,o.useState)({name:"",date:"",time:"",guests:""}),[a,r]=(0,o.useState)([]),[l,i]=(0,o.useState)(!1),[c,u]=(0,o.useState)(!1),d=(0,n.useRouter)();(0,o.useEffect)(()=>{u(!0)},[]),(0,o.useEffect)(()=>{e.date&&c&&m(e.date)},[e.date,c]);let m=async e=>{i(!0);try{let t=await fetch("https://restaurant-booking-zpj0.onrender.com/availability?date=".concat(e));if(!t.ok)throw Error("Error fetching availability");let a=await t.json();r(a.slots||[])}catch(e){console.error("Error fetching slots:",e),alert("Failed to load available slots.")}finally{i(!1)}},h=a=>{t({...e,[a.target.name]:a.target.value})},p=async t=>{t.preventDefault();try{let t=await fetch("https://restaurant-booking-zpj0.onrender.com/book-table",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();t.ok?d.push("/success?name=".concat(encodeURIComponent(e.name),"&date=").concat(encodeURIComponent(e.date),"&time=").concat(encodeURIComponent(e.time))):alert(a.message||"Slot not available. Please choose another.")}catch(e){console.error("Error:",e),alert("Failed to book the table.")}};return(0,s.jsxs)("div",{className:"book-table-container",children:[(0,s.jsx)("div",{className:"overlay"}),(0,s.jsxs)("div",{className:"book-table-content",children:[(0,s.jsx)("h1",{children:"Book a Table"}),(0,s.jsxs)("form",{onSubmit:p,children:[(0,s.jsx)("input",{type:"text",name:"name",placeholder:"Your Name",value:e.name,onChange:h,required:!0,className:"input-field"}),(0,s.jsx)("input",{type:"date",name:"date",value:e.date,onChange:h,required:!0,className:"input-field"}),l?(0,s.jsx)("p",{children:"Loading available slots..."}):(0,s.jsxs)("select",{name:"time",value:e.time,onChange:h,required:!0,className:"input-field",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Select a time slot"}),a.length>0?a.map((e,t)=>(0,s.jsx)("option",{value:e,children:e},t)):(0,s.jsx)("option",{value:"",disabled:!0,children:"No slots available"})]}),(0,s.jsx)("input",{type:"number",name:"guests",placeholder:"Number of Guests",value:e.guests,onChange:h,required:!0,className:"input-field"}),(0,s.jsx)("button",{type:"submit",className:"submit-btn",children:"Book Table"})]})]})]})}a(6640)},6640:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[881,441,517,358],()=>t(9405)),_N_E=e.O()}]);